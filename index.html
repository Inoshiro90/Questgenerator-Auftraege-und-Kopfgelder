<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="utf-8">
</head>
<body>

<script>
// Erstellt Eingabefeld und Buttons
const numQuestsField = document.createElement('input');
numQuestsField.type = 'number';
numQuestsField.style.margin = '10px';
numQuestsField.style.width = '50px';

const btnGenerate = document.createElement('button');
btnGenerate.style.margin = '10px';
btnGenerate.textContent = 'Generieren';

const btnClear = document.createElement('button');
btnClear.textContent = 'Löschen';
btnClear.style.margin = '10px';

// Erstellt Questfunktion
function generateQuest() {

  // Abschnitt Akteur und entsprechende Begriffe für den Questgenerator
  const akteure = [
    "Anführer, maskulin",
    "Berühmtheit, feminin",
    "Bürger, maskulin",
    "Soldat, maskulin",
    "Sonderling, maskulin",
    "Kaufmann, maskulin",
    "Handwerker, maskulin",
    "Bettler, maskulin",
    "Gelehrte, maskulin",
    "Fremde, maskulin",
    "Zauberwirker, maskulin",
    "Fraktion, feminin",
  ];

  // Abschnitt Aktionen und entsprechende Begriffe für den Questgenerator
  const aktionen = [
    "anzugreifen",
    "zu terrorisieren",
    "zu töten",
    "zu fangen",
    "zu vertreiben",
    "zu neutralisieren",
    "zu quälen",
    "zu demoralisieren",
    "zu bestehlen",
    "zu unterjochen",
    "zu ruinieren",
  ];

  // Abschnitt Ziele und entsprechende Begriffe für den Questgenerator
  const ziele = [
    "Tier, neutrum",
    "Abberation, feminin",
    "Konstrukt, neutrum",
    "Drache, maskulin",
    "Feenwesen, neutrum",
    "Unhold, maskulin",
    "Riese, maskulin",
    "Humanoide, maskulin",
    "Monstrosität, feminin",
    "Elementar, maskulin",
    "Schlick, maskulin",
  ];

// Funktion, um einen zufälligen Text aus einem Array auszuwählen
  function getRandomText(arr) {
    const index = Math.floor(Math.random() * arr.length);
    return arr[index];
  }

// Geschlecht und Artikel für den Akteur bestimmen
const AkteurData = getRandomText(akteure);
const [AkteurText, AkteurGeschlecht] = AkteurData.split(', ');
let articleAkteurNominativ;
let articleAkteurGenitiv;
let articleAkteurDativ;
let articleAkteurAkkusativ;
let articleAkteurUnbestimmt;
let articleAkteurPossessivSingularNominativ;
let articleAkteurPossessivPluralNominativ;
switch (AkteurGeschlecht) {
  case 'maskulin':
    articleAkteurNominativ = 'der ';
    articleAkteurGenitiv = 'des ';
    articleAkteurDativ = 'dem ';
    articleAkteurAkkusativ = 'den ';
    articleAkteurUnbestimmt = 'einen ';
    articleAkteurPossessivSingularNominativ = 'sein ';
    articleAkteurPossessivPluralNominativ = 'seine ';
    break;
  case 'feminin':
    articleAkteurNominativ = 'die ';
    articleAkteurGenitiv = 'der ';
    articleAkteurDativ = 'der ';
    articleAkteurAkkusativ = 'die ';
    articleAkteurUnbestimmt = 'eine ';
    articleAkteurPossessivSingularNominativ = 'ihre ';
    articleAkteurPossessivPluralNominativ = 'ihre ';
    break;
  case 'neutrum':
    articleAkteurNominativ = 'das ';
    articleAkteurGenitiv = 'des ';
    articleAkteurDativ = 'dem ';
    articleAkteurUnbestimmt = 'ein ';
    articleAkteurPossessivSingularNominativ = 'sein ';
    articleAkteurPossessivPluralNominativ = 'seine ';
    break;
 default:
   articleAkteurNominativ = 'das ';
   articleAkteurGenitiv = 'des ';
   articleAkteurDativ = 'dem ';
   articleAkteurUnbestimmt = 'ein ';
   articleAkteurPossessivSingularNominativ = 'sein ';
   articleAkteurPossessivPluralNominativ = 'seine ';
   break;
}

// Geschlecht und Artikel für das Ziel bestimmen
const zielData = getRandomText(ziele);
const [zielText, zielGeschlecht] = zielData.split(', ');
let articleZielNominativ;
let articleZielGenitiv;
let articleZielDativ;
let articleZielAkkusativ;
let articleZielUnbestimmt;
let articleZielPossessivSingularNominativ;
let articleZielPossessivPluralNominativ;
switch (zielGeschlecht) {
  case 'maskulin':
    articleZielNominativ = 'der ';
    articleZielGenitiv = 'des ';
    articleZielDativ = 'dem ';
    articleZielAkkusativ = 'den ';
    articleZielUnbestimmt = 'einen ';
    articleZielPossessivSingularNominativ = 'sein ';
    articleZielPossessivPluralNominativ = 'seine ';
    break;
  case 'feminin':
    articleZielNominativ = 'die ';
    articleZielGenitiv = 'der ';
    articleZielDativ = 'der ';
    articleZielAkkusativ = 'die ';
    articleZielUnbestimmt = 'eine ';
    articleZielPossessivSingularNominativ = 'ihre ';
    articleZielPossessivPluralNominativ = 'ihre ';
    break;
  case 'neutrum':
    articleZielNominativ = 'das ';
    articleZielGenitiv = 'des ';
    articleZielDativ = 'dem ';
    articleZielUnbestimmt = 'ein ';
    articleZielPossessivSingularNominativ = 'sein ';
    articleZielPossessivPluralNominativ = 'seine ';
    break;
  default:
    articleZielNominativ = 'das ';
    articleZielGenitiv = 'des ';
    articleZielDativ = 'dem ';
    articleZielUnbestimmt = 'ein ';
    articleZielPossessivSingularNominativ = 'sein ';
    articleZielPossessivPluralNominativ = 'seine ';
    break;
}

// Funktion zum Erzeugen der verschiedenen Fälle eines Substantivs
function declineNoun(noun, gender) {
  const endsWithE = noun.endsWith('e');
  const endsWithT = noun.endsWith('t');
  
  const nounCases = {
    maskulin: {
      nominativ: noun,
      genitiv: endsWithE ? noun + 'n' : endsWithE ? noun + 'en' :noun + 's',
      dativ: noun + 'm',
      akkusativ: endsWithE ? noun + 'n' : noun,
    },
    feminin: {
      nominativ: noun,
      genitiv: noun + 'er',
      dativ: noun + 'er',
      akkusativ: noun,
    },
    neutrum: {
      nominativ: noun,
      genitiv: noun + 'es',
      dativ: noun + 'em',
      akkusativ: noun,
    },
  };

  return nounCases[gender];
}

// Dekliniert Akteurnomen 
const akteurData = getRandomText(akteure);
const [akteurText, akteurGeschlecht] = akteurData.split(', ');
const articleAkteur = akteurGeschlecht === 'maskulin' ? 'Ein ' : 'Eine ';

//Dekliniert Zielnomen
const declinedZiel = declineNoun(zielText, zielGeschlecht);
const declinedAkteur = declineNoun(akteurText, akteurGeschlecht);

//Wählt eine zufällige Aktion aus
const aktion = getRandomText(aktionen);

//Erstellt eine Liste von möglichen Absichten basierend auf dekliniertem Akteur-Nomen und wählt zufällig eine Absicht aus
const absichten = [
    `aus einer Notwendigkeit ${articleAkteurGenitiv} ${declinedAkteur.genitiv} heraus`,
    `damit ${articleAkteurNominativ} ${declinedAkteur.nominativ} eine Herausforderung besteht`,
    `damit ${articleAkteurNominativ} ${declinedAkteur.nominativ} ein Gesetz aufrechterhalten kann`,
    `damit ${articleAkteurNominativ} ${declinedAkteur.nominativ} Rache nehmen kann`,
    `damit ${articleAkteurNominativ} ${declinedAkteur.nominativ} Befehle ausführen kann`,
    `damit ${articleAkteurNominativ} ${declinedAkteur.nominativ} Magie entfesseln kann`,
    `weil ${articleAkteurNominativ} ${declinedAkteur.nominativ} von Emtotionen getrieben wird`,
    `damit ${articleAkteurNominativ} ${declinedAkteur.nominativ} Dominanz zeigen kann`,
    `damit ${articleAkteurNominativ} ${declinedAkteur.nominativ} die Schätze an sich nehmen kann`,
    `damit ${articleAkteurNominativ} ${declinedAkteur.nominativ} Macht erlangt`,
    `damit ${articleAkteurNominativ} ${declinedAkteur.nominativ} die Natur kontrollieren kann`,
    "als Teil eines Rituals",
  ];
  const absicht = getRandomText(absichten);
  
//Erstellt eine Liste von möglichen Entwicklungen basierend auf dekliniertem Ziel-Nomen und wählt zufällig eine Entwicklung aus
  const entwicklungen = [
    `${articleZielNominativ}${declinedZiel.nominativ} wird von einer höheren Macht geschützt`,
    `${articleZielNominativ}${declinedZiel.nominativ} flieht in ${articleZielPossessivSingularNominativ} Versteck`,
    `${articleZielNominativ}${declinedZiel.nominativ} wird fälschlicherweise beschuldigt`,
    "die ganze Tortur ist inszeniert",
    `${articleZielNominativ}${declinedZiel.nominativ} bereut die eigenen Taten`,
    "es wird dadurch unwissentlich eine Prophezeiung erfüllt",
    `${articleZielNominativ}${declinedZiel.nominativ} verbreitet eine Krankheit`,
    `${articleZielNominativ}${declinedZiel.nominativ} wird von Gefolgsleuten unterstützt`,
    `${articleZielNominativ}${declinedZiel.nominativ} ergreift Maßnahmen, um sich zu schützen`,
    `${articleZielNominativ}${declinedZiel.nominativ} reist in ein anderes Reich`,
    `${articleZielNominativ}${declinedZiel.nominativ} wird von Magie geschützt`,
  ];
  const entwicklung = getRandomText(entwicklungen);
  
// Erzeugt einen Quest-Satz mit dem Akteur, dem Ziel, einer Aktion, einer Absicht und einer Entwicklung
const questSentence = `${articleAkteur}${akteurText} heuert euch an, um ${articleZielUnbestimmt}${declinedZiel.akkusativ} ${aktion}, ${absicht}, aber ${entwicklung}.`;

  return questSentence;
}

// on-click events
btnGenerate.addEventListener('click', (event) => {
  event.preventDefault();

// clear existing results
const container = document.getElementById('container');
container.querySelectorAll('li').forEach((li) => li.remove());

const numQuests = parseInt(numQuestsField.value);

for (let i = 0; i < numQuests; i++) {
    const quest = generateQuest();

    const li = document.createElement('li');
    li.textContent = quest;
    container.appendChild(li);
  }
});

//Fügt einen Event Listener hinzu, um das Standardverhalten des 'btnClear'-Buttons zu verhindern
btnClear.addEventListener('click', (event) => {
  event.preventDefault();

//Entfernt bisher generierte Resulate
  const container = document.getElementById('container');
  container.querySelectorAll('li').forEach((li) => li.remove());
});

// Fügt einen Textknoten 'Anzahl der Quests: ' sowie die Felder 'numQuestsField', den Button 'btnGenerate' und den Button 'btnClear' dem Dokumentkörper hinzu.
document.body.appendChild(document.createTextNode('Anzahl der Quests: '));
document.body.appendChild(numQuestsField);
document.body.appendChild(btnGenerate);
document.body.appendChild(btnClear);

// Fügt einen Container für die Ergebnisse hinzu
const container = document.createElement('ul');
container.id = 'container';
document.body.appendChild(container);

</script>

</body>
</html>

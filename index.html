<!DOCTYPE html>
<html lang="de">

<head>
    <meta charset="utf-8">
    <style>
        ul#container {
            white-space: pre-wrap;
        }
    </style>
</head>

<body>

    <script>
        // Erstellt Eingabefeld und Buttons
        const numQuestsField = document.createElement('input');
        numQuestsField.type = 'number';
        numQuestsField.style.margin = '10px';
        numQuestsField.style.width = '50px';

        const btnGenerate = document.createElement('button');
        btnGenerate.style.margin = '10px';
        btnGenerate.textContent = 'Generieren';

        const btnClear = document.createElement('button');
        btnClear.textContent = 'Löschen';
        btnClear.style.margin = '10px';

        // Erstellt Questfunktion
        function generateQuest() {

            // Abschnitt Akteur und entsprechende Begriffe für den Questgenerator
            const akteure = [
                "Anführer , maskulin , regiert oder unterstützt die Regierung bestimmter Völker, Kulturen oder Regionen und hat seinen Platz verdient, wurde dazu gewählt, hat ihn geerbt oder hat ihn mit Gewalt übernommen",
                "Berühmtheit , feminin , ist charismatisch und einnehmend. Sie hat sich auf eine Art und Weise einen Namen gemacht. Vielleicht ist sie berühmt und beliebt, oder sie ist ein bisschen ruchlos",
                "Bürger , maskulin , arbeitet hart, um über die Runden zu kommen. Er folgt wahrscheinlich einem ähnlichen Weg wie seine Vorfahren, indem er das Land bewirtschaftet oder ein bestimmtes Handwerk ausübt, welches gerade lukrativ genug ist, um den Winter zu überstehen",
                "Soldat , maskulin , hat in Kriegen gekämpft, Siedlungen gegen Angriffe von Monstern verteidigt oder ist zumindest kampferprobt, auch wenn er noch nie in einem echten Kampf war",
                "Sonderling , maskulin , lebt und überlebt in der Wildnis. Er hat sich für ein Leben außerhalb der Zivilisation entschieden und könnte zur Bewachung wichtiger Pfade angestellt worden sein oder er könnte sich selbst dem Schutz der Natur verschrieben haben",
                "Kaufmann , maskulin , ist in der Regel wohlhabend und er hat sein Geld durch günstigen Einkauf und teuren Verkauf verdient. Die Waren, mit denen er sein Geld verdient können gewöhnlich oder exotisch sein",
                "Handwerker , maskulin , erhielt eine spezielle Ausbildung, mit der es ihm möglich ist, eine bestimmte Arbeit auf hohem Niveau auszuführen. Dieser Beruf kann über Generationen weitergeben worden sein",
                "Bettler , maskulin , ist eine arme, unglückliche Seele, die der Armut verfallen ist. Er bettelt nun am Straßenrand um Geld und ist möglicherweise aus irgendeinem Grund nicht in der Lage zu arbeiten.",
                "Gelehrte , maskulin , ist ein Experte auf einem bestimmten Gebiet. Er kann relativ neu und unbekannt auf seinem Gebiet sein, oder aber ein absoluter Experte, der über mehr Wissen auf diesem Gebiet verfügt als jeder andere",
                "Fremde , maskulin , kommt aus einem fernen Land und ist auf einheimische Kreaturen gestoßen, und irgendetwas hindert ihn daran, die Situation selbst zu meistern. Er braucht Hilfe von Leuten, die das Gebiet besser kennen als er",
                "Zauberwirker , maskulin , kann in allen Formen und Größen kommen. Er kann seine Magie aus einer der vielen Quellen schöpfen, die beeinflussen, wie er sie einsetzt und welche Form sie annimmt",
                "Fraktion , feminin , kann vieles sein: von Handelsgilden bis zu Piratenflotten, von Schuhmacherallianzen bis zu militärischen Einheiten. Sie ist eine Gruppe von Individuen, die durch gemeinsame Ziele oder Moralvorstellungen miteinander verbunden sind",
            ];

            // Abschnitt Ziele und entsprechende Begriffe für den Questgenerator
            const ziele = [
                "Tier , neutrum , ist ein Teil der natürlichen Ökologie der Welt, normalerweise unintelligent und ohne Gesellschaft oder Sprache. Ein unintelligentes Tier kann im Auftrag eines Besitzers oder Herrn handeln",
                "Abberation , feminin , ist ein außerirdisches Wesen aus einer fremden Existenzebene, das oft angeborene magische Fähigkeiten besitzt, die eher von seinem fremden Geist als von den mystischen Kräften der Welt herrühren",
                "Konstrukt , neutrum , wurde nicht geboren, sondern geschaffen und kann von seinem Schöpfer so programmiert worden sein, dass es in einer bestimmten Weise handelt oder selbständig denkt. Ein nicht-intelligentes Konstrukt kann im Auftrag eines Besitzers oder Meisters handeln",
                "Drache , maskulin , ist ein großes, reptilienartiges Wesen uralten Ursprungs, das über enorme Kräfte verfügt, die mit dem Alter zunehmen. Es besitzt eine hohe Intelligenz und angeborene Magie",
                "Feenwesen , neutrum , ist ein magisches Geschöpf, das eng mit den Kräften der Natur verbunden ist, in dämmrigen Hainen und nebligen Wäldern lebt und oft launisch ist",
                "Unhold , maskulin , ist eine böse Kreatur, die in den niederen Ebenen der Existenz lebt und durch und durch böse ist. Er kann von finsteren Kulten herbeigerufen worden sein oder sich seinen eigenen Weg hierher gebahnt haben, um abscheuliche Taten zu begehen",
                "Riese , maskulin , ist von humanoider Gestalt. Seine Proportionen sind jedoch riesig. Er lebt in eigenen, komplexen Kulturen und Gesellschaften - manche mehr, andere weniger zivilisiert",
                "Humanoide , maskulin , ist ein Mitglied eines humanoiden Volkes, das über eine eigene Sprache, eine eigene Kultur und ein eigenes politisches und moralisches Spektrum verfügt.",
                "Monstrosität , feminin , ist eine furchterregende Kreatur, die das Ergebnis eines schief gelaufenen magischen Experiments, eines schrecklichen Fluchs oder ein pseudo-natürliches Ungeheuer sein kann, das sich jeder Kategorisierung entzieht",
                "Elementar , maskulin , ist eine biologische Form, die von einer chaotischen, elementaren Essenz durchdrungen ist",
                "Schlick , maskulin , ist eine gallertartige Kreatur, die selten eine feste Form annimmt und meist in unterirdischen Höhlen und Verliesen lebt, wo sie sich von Abfällen, Aas oder unglücklichen Abenteurern ernährt",
                "Untote , maskulin , war einst eine lebende Kreatur, die durch nekromantische Magie oder einen unheiligen Fluch in einen entsetzlichen Zustand des Untodes versetzt wurde. Ein unintelligenter Untoter kann im Auftrag eines Meisters handeln",
            ];


            // Funktion, um einen zufälligen Text aus einem Array auszuwählen
            function getRandomText(arr) {
                const index = Math.floor(Math.random() * arr.length);
                return arr[index];
            }

            // Geschlecht für den Akteur bestimmen
            const akteurData = getRandomText(akteure);
            const [akteurText, akteurGeschlecht, akteurBeschreibung] = akteurData.split(' , ');

            // Geschlecht für das Ziel bestimmen
            const zielData = getRandomText(ziele);
            const [zielText, zielGeschlecht, zielBeschreibung] = zielData.split(' , ');

            // Erstelle das Array für Nomen mit schwacher Deklination
            const nomenSchwacheDeklination = [
                'Gelehrte',
                'Fremde',
                'Untote',
                'Humanoide',
            ];

            // Funktion zum Erzeugen der verschiedenen Fälle eines Substantivs
            function declineNoun(noun, gender) {
                const endsWithE = noun.endsWith('e');
                const endsWithT = noun.endsWith('t');

                // Überprüfe, ob das Nomen eine schwache Deklination hat
                if (nomenSchwacheDeklination.includes(noun)) {
                    const nounCases = {
                        maskulin: {
                            nominativ: 'der ' + noun,
                            genitiv: endsWithE ? 'des ' + noun + 'n' : endsWithT ? 'des ' + noun + 'en' : 'des ' + noun + 's',
                            dativ: endsWithE ? 'dem ' + noun + 'n' : 'dem ' + noun,
                            akkusativ: endsWithE ? 'den ' + noun + 'n' : endsWithT ? 'den ' + noun + 'en' : 'den ' + noun,

                            nominativEin: endsWithE ? 'ein ' + noun + 'r' : 'ein ' + noun,
                            genitivEin: endsWithE ? 'eines ' + noun + 'n' : endsWithT ? 'eines ' + noun + 'en' : 'eines ' + noun + 's',
                            dativEin: endsWithE ? 'einem ' + noun + 'n' : 'einem ' + noun,
                            akkusativEin: endsWithE ? 'einen ' + noun + 'n' : endsWithT ? 'einen ' + noun + 'en' : 'einen ' + noun,

                            nominativWelcher: 'welcher ',
                            genitivWelcher: 'welches ',
                            dativWelcher: 'welchem ',
                            akkusativWelcher: 'welchen ',

                            possesivPronomenSingular: 'sein',
                            possesivPronomenPlural: 'sein',
                        },
                    };

                    return nounCases[gender];

                } else {

                    // Normale Deklinationsregeln für Nomen ohne schwache Deklination
                    const nounCases = {
                        maskulin: {
                            nominativ: 'der ' + noun,
                            genitiv: endsWithE ? 'des ' + noun + 'n' : endsWithT ? 'des ' + noun + 'en' : 'des ' + noun + 's',
                            dativ: endsWithE ? 'dem ' + noun + 'n' : 'dem ' + noun,
                            akkusativ: endsWithE ? 'den ' + noun + 'n' : endsWithT ? 'den ' + noun + 'en' : 'den ' + noun,

                            nominativEin: 'ein ' + noun,
                            genitivEin: endsWithE ? 'eines ' + noun + 'n' : endsWithT ? 'eines ' + noun + 'en' : 'eines ' + noun + 's',
                            dativEin: endsWithE ? 'einem ' + noun + 'n' : 'einem ' + noun,
                            akkusativEin: endsWithE ? 'einen ' + noun + 'n' : endsWithT ? 'einen ' + noun + 'en' : 'einen ' + noun,

                            nominativWelcher: 'welcher ',
                            genitivWelcher: 'welches ',
                            dativWelcher: 'welchem ',
                            akkusativWelcher: 'welchen ',

                            possesivPronomenSingularNominativ: 'sein',
                            possesivPronomenSingularNominativFeminin: 'seine',
                            possesivPronomenPluralNominativ: 'seine',
                        },

                        feminin: {
                            nominativ: 'die ' + noun,
                            genitiv: 'der ' + noun,
                            dativ: 'der ' + noun,
                            akkusativ: 'die ' + noun,

                            nominativEin: 'eine ' + noun,
                            genitivEin: 'einer ' + noun,
                            dativEin: 'einer ' + noun,
                            akkusativEin: 'eine ' + noun,

                            nominativWelcher: 'welche ',
                            genitivWelcher: 'welcher ',
                            dativWelcher: 'welcher ',
                            akkusativWelcher: 'welche ',

                            possesivPronomenSingularNominativ: 'ihr',
                            possesivPronomenSingularNominativFeminin: 'ihre',
                            possesivPronomenPlural: 'ihre',
                        },

                        neutrum: {
                            nominativ: 'das ' + noun,
                            genitiv: 'des ' + noun + 's',
                            dativ: 'dem ' + noun,
                            akkusativ: 'das ' + noun,

                            nominativEin: 'ein ' + noun,
                            genitivEin: 'eines ' + noun,
                            dativEin: 'einem ' + noun,
                            akkusativEin: 'ein ' + noun,

                            nominativWelcher: 'welches ',
                            genitivWelcher: 'welchen ',
                            dativWelcher: 'welchem ',
                            akkusativWelcher: 'welches ',

                            possesivPronomenSingularNominativ: 'sein',
                            possesivPronomenSingularNominativFeminin: 'seine',
                            possesivPronomenPlural: 'seine',
                        }

                    };

                    return nounCases[gender];
                }
            }

            //Dekliniert Akteur- und Zielnomen
            const declinedZiel = declineNoun(zielText, zielGeschlecht);
            const declinedAkteur = declineNoun(akteurText, akteurGeschlecht);

            // Abschnitt Aktionen und entsprechende Begriffe für den Questgenerator
            const aktionen = [
                `${declinedZiel.akkusativEin} anzugreifen`,
                `${declinedZiel.akkusativEin} zu terrorisieren`,
                `${declinedZiel.akkusativEin} zu töten`,
                `${declinedZiel.akkusativEin} zu fangen`,
                `${declinedZiel.akkusativEin} zu vertreiben`,
                `${declinedZiel.akkusativEin} zu neutralisieren`,
                `${declinedZiel.akkusativEin} zu quälen`,
                `${declinedZiel.akkusativEin} zu demoralisieren`,
                `von ${declinedZiel.dativEin} zu stehlen`,
                `${declinedZiel.akkusativEin} zu unterjochen`,
                `das Eigentum ${declinedZiel.genitivEin} zu zerstören`,
            ];

            //Wählt eine zufällige Aktion aus
            const aktion = getRandomText(aktionen);

            //Erstellt eine Liste von möglichen Absichten basierend auf dekliniertem Akteur-Nomen und wählt zufällig eine Absicht aus
            const absichten = [
                `aus einer Notwendigkeit ${declinedAkteur.genitiv} heraus`,
                `damit ${declinedAkteur.nominativ} eine Herausforderung besteht`,
                `damit ${declinedAkteur.nominativ} ein Gesetz aufrechterhalten kann`,
                `damit ${declinedAkteur.nominativ} Rache nehmen kann`,
                `damit ${declinedAkteur.nominativ} Befehle ausführen kann`,
                `damit ${declinedAkteur.nominativ} Magie entfesseln kann`,
                `weil ${declinedAkteur.nominativ} von Emotionen getrieben wird`,
                `damit ${declinedAkteur.nominativ} Dominanz zeigen kann`,
                `damit ${declinedAkteur.nominativ} die Schätze ${declinedZiel.genitiv} an sich nehmen kann`,
                `damit ${declinedAkteur.nominativ} Macht erlangt`,
                `damit ${declinedAkteur.nominativ} die Natur kontrollieren kann`,
                "weil diese Handlung Teil eines Rituals ist",
            ];
            const absicht = getRandomText(absichten);

            //Erstellt eine Liste von möglichen Entwicklungen basierend auf dekliniertem Ziel-Nomen und wählt zufällig eine Entwicklung aus
            const entwicklungen = [
                `${declinedZiel.nominativ} wird von einer höheren Macht geschützt`,
                `${declinedZiel.nominativ} flieht in ${declinedZiel.possesivPronomenSingularNominativ} Versteck`,
                `${declinedZiel.nominativ} wird fälschlicherweise beschuldigt`,
                "das Ganze ist nur inszeniert",
                `${declinedZiel.nominativ} bereut die eigenen Taten`,
                "dadurch wird unwissentlich eine Prophezeiung erfüllt",
                `${declinedZiel.nominativ} verbreitet eine Krankheit`,
                `${declinedZiel.nominativ} wird von Gefolgsleuten unterstützt`,
                `${declinedZiel.nominativ} ergreift Maßnahmen, um sich zu schützen`,
                `${declinedZiel.nominativ} reist in ein anderes Reich`,
                `${declinedZiel.nominativ} wird von Magie geschützt`,
            ];
            const entwicklung = getRandomText(entwicklungen);

            // Erzeugt einen Quest-Satz mit dem Akteur, dem Ziel, einer Aktion, einer Absicht und einer Entwicklung
            const questSentence = `${declinedAkteur.nominativEin} heuert euch an, um ${aktion}, ${absicht}, aber ${entwicklung}. \n\n${declinedAkteur.nominativ} ${akteurBeschreibung}. \n\n${declinedZiel.nominativEin} ${zielBeschreibung}.\n\n`;

            //Erweiterung von questSentence für später: Bei ${declinedAkteur.dativ} handelt es sich um declinedSubakteur.akkusativEin, beschreibungSubakteur, declinedSubakteur.nominativWelcher subabsicht und declinedSubakteur.nominativ möchte, dass ${declinedZiel.nominativ} subaktion, beschreibungSubaktion  Bei ${declinedZiel.dativ} handelt es sich um declinedSubziel.akkusativEin, beschreibungSubziel. Bei der unerwarteten Entwicklung handelt es sich um subentwicklung, beschreibungSubentwicklung.

            // Großbuchstaben für den ersten Buchstaben jedes Satzes
            const questSentenceCapitalized = questSentence.replace(/(^\w|\.\s*\w)/g, (match) => match.toUpperCase());

            return questSentenceCapitalized;
        }

        // on-click events
        btnGenerate.addEventListener('click', (event) => {
            event.preventDefault();

            // clear existing results
            const container = document.getElementById('container');
            container.querySelectorAll('li').forEach((li) => li.remove());

            const numQuests = parseInt(numQuestsField.value);

            for (let i = 0; i < numQuests; i++) {
                const quest = generateQuest();

                const li = document.createElement('li');
                li.textContent = quest;
                container.appendChild(li);
            }
        });

        // Fügt einen Event Listener hinzu, um das Standardverhalten des 'btnClear'-Buttons zu verhindern
        btnClear.addEventListener('click', (event) => {
            event.preventDefault();

            // Entfernt bisher generierte Resulate
            const container = document.getElementById('container');
            container.querySelectorAll('li').forEach((li) => li.remove());
        });

        // Fügt einen Textknoten 'Anzahl der Quests: ' sowie die Felder 'numQuestsField', den Button 'btnGenerate' und den Button 'btnClear' dem Dokumentkörper hinzu.
        document.body.appendChild(document.createTextNode('Anzahl der Quests: '));
        document.body.appendChild(numQuestsField);
        document.body.appendChild(btnGenerate);
        document.body.appendChild(btnClear);

        // Fügt einen Container für die Ergebnisse hinzu
        const container = document.createElement('ul');
        container.id = 'container';
        document.body.appendChild(container);
    </script>

</body>

</html>

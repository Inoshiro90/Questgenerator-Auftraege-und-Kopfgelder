<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="utf-8">
</head>
<body>

<script>
// Erstellt Eingabefeld und Buttons
const numQuestsField = document.createElement('input');
numQuestsField.type = 'number';
numQuestsField.style.margin = '10px';
numQuestsField.style.width = '50px';

const btnGenerate = document.createElement('button');
btnGenerate.style.margin = '10px';
btnGenerate.textContent = 'Generieren';

const btnClear = document.createElement('button');
btnClear.textContent = 'Löschen';
btnClear.style.margin = '10px';

// Erstellt Questfunktion
function generateQuest() {

  // Abschnitt Akteur und entsprechende Begriffe für den Questgenerator
  const akteure = [
    "Anführer, maskulin",
    "Berühmtheit, feminin",
    "Bürger, maskulin",
    "Soldat, maskulin",
    "Sonderling, maskulin",
    "Kaufmann, maskulin",
    "Handwerker, maskulin",
    "Bettler, maskulin",
    "Gelehrte, maskulin",
    "Fremde, maskulin",
    "Zauberwirker, maskulin",
    "Fraktion, feminin",
  ];

  // Abschnitt Ziele und entsprechende Begriffe für den Questgenerator
  const ziele = [
    "Tier, neutrum",
    "Abberation, feminin",
    "Konstrukt, neutrum",
    "Drache, maskulin",
    "Feenwesen, neutrum",
    "Unhold, maskulin",
    "Riese, maskulin",
    "Humanoide, maskulin",
    "Monstrosität, feminin",
    "Elementar, maskulin",
    "Schlick, maskulin",
  ];


// Funktion, um einen zufälligen Text aus einem Array auszuwählen
  function getRandomText(arr) {
    const index = Math.floor(Math.random() * arr.length);
    return arr[index];
  }

// Geschlecht für den Akteur bestimmen
const akteurData = getRandomText(akteure);
const [akteurText, akteurGeschlecht] = akteurData.split(', ');

// Geschlecht für das Ziel bestimmen
const zielData = getRandomText(ziele);
const [zielText, zielGeschlecht] = zielData.split(', ');

// Erstelle das Array für Nomen mit schwacher Deklination
const nomenSchwacheDeklination = [
  'Gelehrte',
  'Fremde',
];

// Funktion zum Erzeugen der verschiedenen Fälle eines Substantivs
function declineNoun(noun, gender) {
  const endsWithE = noun.endsWith('e');
  const endsWithT = noun.endsWith('t');
  
  // Überprüfe, ob das Nomen eine schwache Deklination hat
  if (nomenSchwacheDeklination.includes(noun)) {
    const nounCases = {
      maskulin: {      
        nominativ: 'der ' + noun,
        genitiv: endsWithE ? 'des ' + noun + 'n' : endsWithT ? 'des ' + noun + 'en' : 'des ' + noun + 's',
        dativ: endsWithE ? 'dem ' + noun + 'n' : 'dem ' + noun,
        akkusativ: endsWithE ? 'den ' + noun + 'n': endsWithT ? 'den ' + noun + 'en': 'den ' + noun,
        
        nominativEin: endsWithE ? 'ein ' + noun + 'r' :'ein ' + noun,
        genitivEin: endsWithE ? 'eines ' + noun + 'n' : endsWithT ? 'eines ' + noun + 'en' : 'eines ' + noun + 's',
        dativEin: endsWithE ? 'einem ' + noun + 'n' :'einem ' + noun,
        akkusativEin: endsWithE ? 'einen ' + noun + 'n': endsWithT ? 'einen ' + noun + 'en': 'einen ' + noun,
        
        nominativWelcher: 'welcher ',
        genitivWelcher: 'welches ',
        dativWelcher: 'welchem ',
        akkusativWelcher: 'welchen ',
        
        possesivPronomenSingular: 'sein',
        possesivPronomenPlural: 'sein',
      },
      
      feminin: {      
        nominativ: 'die ' + noun,
        genitiv: 'der ' + noun,
        dativ: 'der ' + noun,
        akkusativ: 'die ' + noun,
        
        nominativEin: 'eine ' + noun,
        genitivEin: 'einer ' + noun,
        dativEin: 'einer ' + noun,
        akkusativEin: 'eine ' + noun,
        
        nominativWelcher: 'welche ',
        genitivWelcher: 'welcher ',
        dativWelcher: 'welcher ',
        akkusativWelcher: 'welche ',
        
        possesivPronomenSingular: 'ihr',
        possesivPronomenPlural: 'ihre',
      },
      
      neutrum: {
        nominativ: 'das ' + noun,
        genitiv: 'des ' + noun,
        dativ: 'dem ' + noun,
        akkusativ: 'das ' + noun,
                    
        nominativEin: 'ein ' + noun,
        genitivEin: 'eines ' + noun,
        dativEin: 'einem ' + noun,
        akkusativEin: 'ein ' + noun,
        
        nominativWelcher: 'welches ',
        genitivWelcher: 'welchen ',
        dativWelcher: 'welchem ',
        akkusativWelcher: 'welches ',
        
        possesivPronomenSingular: 'sein',
        possesivPronomenPlural: 'seine',
      },
    };

    return nounCases[gender];
    
  } else {
  
    // Normale Deklinationsregeln für Nomen ohne schwache Deklination
    const nounCases = {
      maskulin: {
        nominativ: 'der ' + noun,
        genitiv: endsWithE ? 'des ' + noun + 'n' : endsWithT ? 'des ' + noun + 'en' : 'des ' + noun + 's',
        dativ: endsWithE ? 'dem ' + noun + 'n' : 'dem ' + noun,
        akkusativ: endsWithE ? 'den ' + noun + 'n': endsWithT ? 'den ' + noun + 'en': 'den ' + noun,
        
        nominativEin: 'ein ' + noun,
        genitivEin: endsWithE ? 'eines ' + noun + 'n' : endsWithT ? 'eines ' + noun + 'en' : 'eines ' + noun + 's',
        dativEin: endsWithE ? 'einem ' + noun + 'n' :'einem ' + noun,
        akkusativEin: endsWithE ? 'einen ' + noun + 'n': endsWithT ? 'einen ' + noun + 'en': 'einen ' + noun,
        
        nominativWelcher: 'welcher ',
        genitivWelcher: 'welches ',
        dativWelcher: 'welchem ',
        akkusativWelcher: 'welchen ',
        
        possesivPronomenSingularNominativ: 'sein',
        possesivPronomenSingularNominativFeminin: 'seine',
        possesivPronomenPluralNominativ: 'seine',
      },
      
      feminin: {
        nominativ: 'die ' + noun,
        genitiv: 'der ' + noun,
        dativ: 'der ' + noun,
        akkusativ: 'die ' + noun,
        
        nominativEin: 'eine ' + noun,
        genitivEin: 'einer ' + noun,
        dativEin: 'einer ' + noun,
        akkusativEin: 'eine ' + noun,
        
        nominativWelcher: 'welche ',
        genitivWelcher: 'welcher ',
        dativWelcher: 'welcher ',
        akkusativWelcher: 'welche ',
        
        possesivPronomenSingularNominativ: 'ihr',
        possesivPronomenSingularNominativFeminin: 'ihre',
        possesivPronomenPlural: 'ihre',
      },
      
      neutrum: {
        nominativ: 'das ' + noun,
        genitiv: 'des ' + noun,
        dativ: 'dem ' + noun,
        akkusativ: 'das ' + noun,
        
        nominativEin: 'ein ' + noun,
        genitivEin: 'eines ' + noun,
        dativEin: 'einem ' + noun,
        akkusativEin: 'ein ' + noun,
        
        nominativWelcher: 'welches ',
        genitivWelcher: 'welchen ',
        dativWelcher: 'welchem ',
        akkusativWelcher: 'welches ',
        
        possesivPronomenSingularNominativ: 'sein',
        possesivPronomenSingularNominativ: 'seine',
        possesivPronomenPlural: 'seine', 
      }
      
    };

    return nounCases[gender];
  }
}

  // Dekliniert Akteurnomen 
  const articleAkteur = akteurGeschlecht === 'maskulin' ? 'Ein ' : 'Eine ';
  const articleZiel = zielGeschlecht === 'maskulin' ? 'ein ' : 'neutrum' ? 'ein ' : 'eine ';

  //Dekliniert Zielnomen
  const declinedZiel = declineNoun(zielText, zielGeschlecht);
  const declinedAkteur = declineNoun(akteurText, akteurGeschlecht);

  // Abschnitt Aktionen und entsprechende Begriffe für den Questgenerator
  const aktionen = [
    `${declinedZiel.akkusativEin} anzugreifen`,
    `${declinedZiel.akkusativEin} zu terrorisieren`,
    `${declinedZiel.akkusativEin} zu töten`,
    `${declinedZiel.akkusativEin} zu fangen`,
    `${declinedZiel.akkusativEin} zu vertreiben`,
    `${declinedZiel.akkusativEin} zu neutralisieren`,
    `${declinedZiel.akkusativEin} zu quälen`,
    `${declinedZiel.akkusativEin} zu demoralisieren`,
    `von ${declinedZiel.dativEin} zu stehlen`,
    `${declinedZiel.akkusativEin} zu unterjochen`,
    `das Eigentum ${declinedZiel.genitivEin} zu zerstören`,
  ];
  
//Wählt eine zufällige Aktion aus
const aktion = getRandomText(aktionen);

  //Erstellt eine Liste von möglichen Absichten basierend auf dekliniertem Akteur-Nomen und wählt zufällig eine Absicht aus
  const absichten = [
    `aus einer Notwendigkeit ${declinedAkteur.genitiv} heraus`,
    `damit ${declinedAkteur.nominativ} eine Herausforderung besteht`,
    `damit ${declinedAkteur.nominativ} ein Gesetz aufrechterhalten kann`,
    `damit ${declinedAkteur.nominativ} Rache nehmen kann`,
    `damit ${declinedAkteur.nominativ} Befehle ausführen kann`,
    `damit ${declinedAkteur.nominativ} Magie entfesseln kann`,
    `weil ${declinedAkteur.nominativ} von Emotionen getrieben wird`,
    `damit ${declinedAkteur.nominativ} Dominanz zeigen kann`,
    `damit ${declinedAkteur.nominativ} die Schätze an sich nehmen kann`,
    `damit ${declinedAkteur.nominativ} Macht erlangt`,
    `damit ${declinedAkteur.nominativ} die Natur kontrollieren kann`,
    "weil diese Handlung Teil eines Rituals ist",
  ];
  const absicht = getRandomText(absichten);
  
  //Erstellt eine Liste von möglichen Entwicklungen basierend auf dekliniertem Ziel-Nomen und wählt zufällig eine Entwicklung aus
  const entwicklungen = [
    `${declinedZiel.nominativ} wird von einer höheren Macht geschützt`,
    `${declinedZiel.nominativ} flieht in ${declinedZiel.possesivPronomenSingularNominativ} Versteck`,
    `${declinedZiel.nominativ} wird fälschlicherweise beschuldigt`,
    "das Ganze ist nur inszeniert",
    `${declinedZiel.nominativ} bereut die eigenen Taten`,
    "dadurch wird unwissentlich eine Prophezeiung erfüllt",
    `${declinedZiel.nominativ} verbreitet eine Krankheit`,
    `${declinedZiel.nominativ} wird von Gefolgsleuten unterstützt`,
    `${declinedZiel.nominativ} ergreift Maßnahmen, um sich zu schützen`,
    `${declinedZiel.nominativ} reist in ein anderes Reich`,
    `${declinedZiel.nominativ} wird von Magie geschützt`,
  ];
  const entwicklung = getRandomText(entwicklungen);
  
  // Erzeugt einen Quest-Satz mit dem Akteur, dem Ziel, einer Aktion, einer Absicht und einer Entwicklung
  const questSentence = `${declinedAkteur.nominativEin} heuert euch an, um ${aktion}, ${absicht}, aber ${entwicklung}. `;

//Erweiterung von questSentence für später: Bei ${declinedAkteur.dativ} handelt es sich um declinedSubakteur.akkusativEin, beschreibungSubakteur, declinedSubakteur.nominativWelcher subabsicht und declinedSubakteur.nominativ möchte, dass ${declinedZiel.nominativ} subaktion, beschreibungSubaktion  Bei ${declinedZiel.dativ} handelt es sich um declinedSubziel.akkusativEin, beschreibungSubziel. Bei der unerwarteten Entwicklung handelt es sich um subentwicklung, beschreibungSubentwicklung.
  
 // Großbuchstaben für den ersten Buchstaben jedes Satzes
  const questSentenceCapitalized = questSentence.replace(/(^\w|\.\s*\w)/g, (match) => match.toUpperCase());

  return questSentenceCapitalized;
}

// on-click events
btnGenerate.addEventListener('click', (event) => {
  event.preventDefault();

// clear existing results
const container = document.getElementById('container');
container.querySelectorAll('li').forEach((li) => li.remove());

const numQuests = parseInt(numQuestsField.value);

for (let i = 0; i < numQuests; i++) {
    const quest = generateQuest();

    const li = document.createElement('li');
    li.textContent = quest;
    container.appendChild(li);
  }
});

// Fügt einen Event Listener hinzu, um das Standardverhalten des 'btnClear'-Buttons zu verhindern
btnClear.addEventListener('click', (event) => {
  event.preventDefault();

// Entfernt bisher generierte Resulate
  const container = document.getElementById('container');
  container.querySelectorAll('li').forEach((li) => li.remove());
});

// Fügt einen Textknoten 'Anzahl der Quests: ' sowie die Felder 'numQuestsField', den Button 'btnGenerate' und den Button 'btnClear' dem Dokumentkörper hinzu.
document.body.appendChild(document.createTextNode('Anzahl der Quests: '));
document.body.appendChild(numQuestsField);
document.body.appendChild(btnGenerate);
document.body.appendChild(btnClear);

// Fügt einen Container für die Ergebnisse hinzu
const container = document.createElement('ul');
container.id = 'container';
document.body.appendChild(container);

</script>

</body>
</html>
